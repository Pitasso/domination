<div ng-include="'app/views/partial/nav.html'"></div>

<div class="main">
    <div class="post-list container">

        <div ng-hide="post_query" >
            <div ng-show="noResults" class="center-align grey-text">No Questions Have Been Posted Yet<span ng-if="!currentUser">, Sign In To Post a Question</span></div>
            <div ng-repeat="post in postCollection | filter: { instance : { type : post_type } } : false" >
                <div class="post-item">
                    <a class="post-upvote" ng-click="upvotePost($index, post);">
                        <span  ng-hide="fetchBy === 'unapproved'" class="vote-arrow icon ion-chevron-up" aria-hidden="true"></span>
                        <span  ng-hide="fetchBy === 'unapproved'" class="vote-counter">{{post.instance.actions.votes.total}}</span>
                        <span  ng-show="fetchBy === 'unapproved'" ng-click="approvePost(post)"><span><span class="icon ion-checkmark" aria-hidden="true"></span></span>
                    </a>
                    <div class="post-thumbnail" ui-sref="Post({ slug : post.instance.slug })">
                        <img ng-src="{{post.instance.thumbnail}}" class="img-responsive">
                    </div>
                    <div class="post-desc" ui-sref="Post({ slug : post.instance.slug })">
                        <span class="post-category">{{post.instance.type}}</span>
                        <a class="post-title" ng-if="post.instance.type === 'game'">{{post.instance.team_1}} <span>vs</span> {{post.instance.team_2}}</a>
                        <a class="post-title" ng-if="post.instance.type === 'link'">{{post.instance.title}}</a>
                        <div class="post-meta" ng-if="post.instance.type === 'game'">{{post.instance.title}}</div>
                    </div>
                    <div class="post-details" >
                        <img ng-src="{{ post.instance.owner.profileImg.split('_normal').join('') }}" class="author-avatar img-circle"
                        ui-sref="Profile({ username : post.instance.owner.username})">
                        <div class="comments" ng-hide="fetchBy === 'unapproved'"><span class="icon ion-ios-chatbubble-outline" aria-hidden="true"></span>  {{post.instance.comment_count}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div ng-hide="noSearchResults">
            <div ng-show="noSearchResults" class="center-align grey-text">No results found matching, <b>{{post_query}}</b>. Please try another search.</div>
            <div ng-repeat="post in searchResults">


            </div>
        </div>

        <div class="load-more">
            <a ng-hide="noMore" infinite-scroll="loadNextPosts()" infinite-scroll-immediate-check="false" class="btn"><div class="spinner"></div> Loading posts...</a>
            <a ng-show="noMore" href="#">No more posts..</a>
        </div>
    </div>
</div>
