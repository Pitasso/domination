<div ng-include="'app/views/partial/nav.html'"></div>

<div class="main">
    <div class="post-list container">
        <div class="row">
            <div class="title">Last 30 days</div>
        </div>

        <div ng-hide="post_query" >
            <!-- Temp -->
            <div ng-show="noResults" class="center-align grey-text">No Questions Have Been Posted Yet<span ng-if="!currentUser">, Sign In To Post a Question</span></div>
            <div class="row" ng-repeat="post in postCollection" | filter: type : strict"">

                <div class="post-item col-md-10 col-md-offset-1">
                    <a class="post-upvote" ng-click="upvotePost($index, post);">
                        <span class="vote-arrow glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
                        <span class="vote-counter">{{post.instance.actions.votes.total}}</span>
                    </a>
                    <div class="post-thumbnail">
                        <img ng-src="{{post.instance.thumbnail}}" class="img-responsive">
                    </div>
                    <div class="post-desc">
                        <a class="post-category btn btn-brown btn-xs">{{post.instance.type}}</a>
                        <a class="post-title" ui-sref="Post({ id : post.instance._id })" ng-if="post.instance.type === 'game'">
                          {{post.instance.team_1}} <span>vs</span> {{post.instance.team_2}}
                        </a>
                        <a class="post-title" ui-sref="Post({ id : post.instance._id })" ng-if="post.instance.type === 'link'">
                          {{post.instance.title}}
                        </a>
                        <div class="post-meta" ng-if="post.instance.type === 'game'">{{post.instance.title}}</div>
                    </div>
                    <div class="post-details">
                        <img ng-src="{{post.instance.owner.profileImg}}" uib-popover-template="'app/views/partial/user.html'" popover-placement="bottom" popover-trigger="mouseenter mouseleave" class="author-avatar img-circle">
                        <div class="comments"><span class="icon ion-ios-chatbubble-outline" aria-hidden="true"></span>  {{post.instance.actions.comments.length}}</div>
                    </div>
                </div>
            </div>
        </div>


        <div ng-hide="noSearchResults">
            <div ng-show="noSearchResults" class="center-align grey-text">No results found matching, <b>{{post_query}}</b>. Please try another search.</div>


            <div class="row" ng-repeat="post in searchResults">
                <div class="post-item col-md-10 col-md-offset-1">
                    <a class="post-upvote" href="#">
                        <span class="vote-arrow glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
                        <span class="vote-counter">{{post.instance.actions.votes.total}}</span>
                    </a>
                    <div class="post-thumbnail">
                        <img ng-src="{{post.instance.thumbnail}}" alt="" class="img-responsive">
                    </div>
                    <div class="post-desc">
                        <a class="post-category btn btn-brown btn-xs" href="">{{post.instance.type}}</a>
                        <a href="#" class="post-title">{{post.instance.title}}</a>
                        <div class="post-meta">{{post.instance.desc}}</div>
                    </div>
                    <div class="post-details">

                        <img ng-src="{{post.instance.owner.profileImg}}" alt="" class="author-avatar img-circle">
                        <div class="comments"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span> 15</div>
                    </div>
                </div>
            </div>

        </div>

        <div class="load-more row">
            <a infinite-scroll="loadMorePosts()" infinite-scroll-disabled="{{ paginationInProgress }}" class="btn">More Posts...</a>
        </div>
    </div>
</div>
